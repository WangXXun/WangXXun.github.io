"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[593],{9593:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r,o,i,l,u,a,c=n(7437),p=n(2265);let s=(0,p.createContext)(null),f=s.Provider;function d(){let e=(0,p.useContext)(s);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var m=n(759),g=n.n(m);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let v=(0,p.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:o,id:i,placeholder:l,style:u,whenReady:a,zoom:c,...s},d){let[g]=(0,p.useState)({className:o,id:i,style:u}),[v,y]=(0,p.useState)(null);(0,p.useImperativeHandle)(d,()=>v?.map??null,[v]);let x=(0,p.useCallback)(r=>{if(null!==r&&null===v){let o=new m.Map(r,s);null!=n&&null!=c?o.setView(n,c):null!=e&&o.fitBounds(e,t),null!=a&&o.whenReady(a),y(Object.freeze({__version:1,map:o}))}},[]);(0,p.useEffect)(()=>()=>{v?.map.remove()},[v]);let b=v?p.createElement(f,{value:v},r):l??null;return p.createElement("div",h({},g,{ref:x}),b)});var y=n(4887);function x(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function b(e,t){return null==t?function(t,n){let r=(0,p.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){let o=(0,p.useRef)();o.current||(o.current=e(n,r));let i=(0,p.useRef)(n),{instance:l}=o.current;return(0,p.useEffect)(function(){i.current!==n&&(t(l,n,i.current),i.current=n)},[l,n,r]),o}}function w(e,t){let n=(0,p.useRef)(t);(0,p.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function j(e,t){let n=(0,p.useRef)();(0,p.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function C(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function E(e){return function(t){var n;let r=d(),o=e(C(t,r),r);return w(r.map,t.attribution),j(o.current,t.eventHandlers),n=o.current,(0,p.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),o}}let I=(r=E(b(function({url:e,...t},n){return x(new m.TileLayer(e,C(t,n)),n)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})),(0,p.forwardRef)(function(e,t){let{instance:n}=r(e).current;return(0,p.useImperativeHandle)(t,()=>n),null})),O=(o=E(b(function({position:e,...t},n){var r;let o=new m.Marker(e,t);return x(o,(r={overlayContainer:o},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})),(0,p.forwardRef)(function(e,t){let{instance:n,context:r}=o(e).current;return(0,p.useImperativeHandle)(t,()=>n),null==e.children?null:p.createElement(f,{value:r},e.children)})),z=(i=function(e,t){return x(new m.Popup(e,t.overlayContainer),t)},l=function(e,t,{position:n},r){(0,p.useEffect)(function(){let{instance:o}=e;function i(e){e.popup===o&&(o.update(),r(!0))}function l(e){e.popup===o&&r(!1)}return t.map.on({popupopen:i,popupclose:l}),null==t.overlayContainer?(null!=n&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:i,popupclose:l}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,n])},u=b(i),a=function(e,t){let n=d(),r=u(C(e,n),n);return w(n.map,e.attribution),j(r.current,e.eventHandlers),l(r.current,n,e,t),r},(0,p.forwardRef)(function(e,t){let[n,r]=(0,p.useState)(!1),{instance:o}=a(e,r).current;(0,p.useImperativeHandle)(t,()=>o),(0,p.useEffect)(function(){n&&o.update()},[o,n,e.children]);let i=o._contentNode;return i?(0,y.createPortal)(e.children,i):null}));delete g().Icon.Default.prototype._getIconUrl,g().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});let k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ffffff";return g().divIcon({className:"custom-marker",html:'<div style="\n      width: 12px;\n      height: 12px;\n      background: '.concat(e,';\n      border: 2px solid rgba(255, 255, 255, 0.8);\n      border-radius: 50%;\n      box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n    "></div>'),iconSize:[12,12],iconAnchor:[6,6]})},L=[{id:1,position:[39.9042,116.4074],title:"北京项目",description:"在这里完成的重要项目",type:"project"},{id:2,position:[31.2304,121.4737],title:"上海旅行",description:"2023年的上海之旅",type:"travel"},{id:3,position:[30.5728,104.0668],title:"成都项目",description:"在成都的工作经历",type:"project"},{id:4,position:[23.1291,113.2644],title:"广州旅行",description:"探索广州的文化",type:"travel"},{id:5,position:[28.2278,112.9388],title:"长沙",description:"我的家乡",type:"home"}];function R(e){let{scrollProgress:t}=e,n=d().map;return(0,p.useEffect)(()=>{t>.5&&t<.55&&n.setView([35,105],4,{animate:!0})},[t,n]),null}function S(e){let{scrollProgress:t}=e,[n,r]=(0,p.useState)(null),[o,i]=(0,p.useState)(!1),l=t>.6;return(0,p.useEffect)(()=>{let e=e=>{if(l&&o)return};return window.addEventListener("wheel",e,{passive:!0}),()=>window.removeEventListener("wheel",e)},[l,o]),(0,c.jsx)("div",{style:{width:"100%",height:"100%"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:(0,c.jsxs)(v,{center:[35,105],zoom:4,minZoom:2,maxZoom:18,style:{width:"100%",height:"100%"},zoomControl:l,scrollWheelZoom:l&&o,dragging:l,className:"map-container",worldCopyJump:!1,children:[(0,c.jsx)(I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",noWrap:!1}),(0,c.jsx)(R,{scrollProgress:t}),L.map(e=>(0,c.jsx)(O,{position:e.position,icon:k("project"===e.type?"#88ccff":"travel"===e.type?"#ffaa88":"#ffffff"),eventHandlers:{click:()=>{r(e.id)}},children:(0,c.jsx)(z,{children:(0,c.jsxs)("div",{style:{color:"#000",padding:"8px",minWidth:"200px"},children:[(0,c.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"600"},children:e.title}),(0,c.jsx)("p",{style:{margin:0,fontSize:"14px",color:"#666"},children:e.description}),(0,c.jsx)("div",{style:{marginTop:"8px",padding:"4px 8px",background:"project"===e.type?"#e3f2fd":"travel"===e.type?"#fff3e0":"#f5f5f5",borderRadius:"4px",fontSize:"12px",color:"#666"},children:"project"===e.type?"项目":"travel"===e.type?"旅行":"家乡"})]})})},e.id))]})})}}}]);